;REGISTERS
;R0 - Return register
;R1 - argument - Source register
;R2	- temp
;R4 - Starting address of sine table
;R7 - Copy of argument


		AREA myCode, CODE, READONLY
		EXPORT __main
		ENTRY
				
__main
		MOV		R1,#34
		MOV 	R7,R1
		LDR		R4,=270
		ADR		R4,sin_data
;first quadrant		
		CMP		R1,#90
		BLE		retvalue
;second quadrant (180-angle)
		CMP		R1,#180
		ITT		LE
		RSBLE	R1,R1,#180
		BLE		retvalue
		
		CMP		R1,R2
		ITT		LE
		SUBLE	R1,R1,#180
		BLE		retvalue
		
		RSB		R1,R1,#360
		
retvalue	
		LDR		R0,[R4,R1,LSL #2] ;ADDRESS = BASE + OFFSET*4
		CMP		R7,#180; If we have to return negative value, negate the value
		IT		GT
		RSBGT	R0,R0,#0

STOP	B		STOP

		ALIGN
			
sin_data
		DCD	0x000000,0x017452,0x034899,0x052336
		DCD	0x069756,0x087156,0x104528,0x121869
		DCD	0x139173,0x156434,0x173648,0x190809
		DCD	0x207912,0x224951,0x241922,0x258819
		DCD	0x275637,0x292372,0x309017,0x325568
		DCD	0x342020,0x358368,0x374607,0x390731
		DCD	0x406737,0x422618,0x438371,0x453990
		DCD	0x469472,0x484810,0x500000,0x515038
		DCD	0x529919,0x544639,0x559193,0x573576
		DCD	0x587785,0x601815,0x615662,0x629320
		DCD	0x642788,0x656059,0x669131,0x681998
		DCD	0x694658,0x707107,0x719340,0x731354
		DCD	0x743145,0x754710,0x766044,0x777146
		DCD	0x788011,0x798635,0x809017,0x819152
		DCD	0x829038,0x838671,0x848048,0x857167
		DCD	0x866025,0x874620,0x882948,0x891007
		DCD	0x898794,0x906308,0x913545,0x920505
		DCD	0x927184,0x933580,0x939693,0x945519
		DCD	0x951057,0x956305,0x961262,0x965926
		DCD	0x970296,0x974370,0x978148,0x981627
		DCD	0x984808,0x987688,0x990268,0x992546
		DCD	0x994522,0x996195,0x997564,0x998630
	
		END
		